<!doctype html>
<html>
<head>
<title> FlyOlinFly </title>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='style.css')}}">
<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<style type="text/css">

#entries tbody tr.odd td{

}

#entries tbody tr.even td {

}

table{
border-collapse: collapse;
border-spacing: 0px;
}

</style>
</head>
<body>

{% macro input(name, value='', type='text', size=20) -%}
	<input id="{{ name }}" type="{{ type }}" name="{{ name }}" 
	value="{{ value|e }}" size="{{ size }}" >
{%- endmacro %}

{% if not session.logged_in %}

<h1>You have not authorized this app. You will be redirected OlinApps momentarily</h1>

<script type="text/javascript">
$(document).ready(function() {
setTimeout("location.href='http://olinapps.com/external?callback=http://127.0.0.1:5000/authed'", 5000);
});
</script>
	
{% else %}
<div id="main">
	<form action="{{ url_for('add_newentry') }}" method=post class=add-entry>
	{% for message in get_flashed_messages() %}
		<div class="flash">{{ message }} </div>
	{% endfor %}
	<fieldset id="entry">
		<legend>Arrival Details</legend>
		<em>All fields are required</em>
		<ol>
			<li>
				<label>First Name</label>
				<input id="fname" type="text" name="fname" class="required" autofocus><br />
			</li>
			<li>
				<label>Last Name</label> 
				{{ input('lname') }} <br />	
			</li>
			<li>
				<label>Phone Number</label> 
				{{ input('phonenum') }} <br />
			</li>
			<li>
				<label>E-mail</label> 
				{{ input('email', '', 'email') }} <br />
			</li>
			<li>
				<label>Flight</label> 
				{{ input('flightdesc') }} <br />
			</li>
			<li>				
				<label>Date</label> 
				{{ input('date') }} <br />			
			</li>
			<li>
				<label>Time</label> 
				{{ input('time') }} <br />
			</li>
		</ol>
	<input type="submit" value="Submit">
	</fieldset>

	<div id="list">
		{% if entries != None %}
		<table id="entries" border="0">
			<thead>
				<tr>
					<th>Date</th>
					<th>Time</th>
					<th>Name</th>
					<th>Phone</th>
					<th>Flight</th>	
					<th>Email</th>
				</tr>	
			</thead>
			<tbody>
				{% for entry in entries %}
					{% if loop.index%2 == 0 %}
					<tr id="{{entry.fname}}{{entry.lname}}" class="even">
					{% else %}
					<tr id="{{entry.fname}}{{entry.lname}}" class="odd">
					{% endif %}
						<td>{{ entry.date }}</td>
						<td>{{ entry.time }}</td>
						<td>{{ entry.fname }} {{ entry.lname }}</td>
						<td>{{ entry.phonenum }}</td>
						<td>{{ entry.flightdesc }}</td>
						<td>{{ entry.email }}</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
		{% else %}
		<h2> Hope you had a wonderful break! </h2>
		{% endif %}
	</div>

</div>

<script type="text/javascript" >


$("tbody tr.even td").css("background-color", "#FF7400")

</script>
{% endif %}


</body>
</html>
